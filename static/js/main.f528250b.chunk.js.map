{"version":3,"sources":["AppCamera.js","AppButton.js","AppImage.js","App.js","index.js"],"names":["AppCamera","_ref","onTakePhoto","onCameraStart","react_default","a","createElement","className","id","build_default","AppButton","title","onClick","AppImage","src","width","alt","App","state","firstPhoto","secondPhoto","thirdPhoto","timestamp","sendToS3","data","name","axios","post","process","photo","then","r","catch","e","console","error","initCamera","video","document","querySelector","canvasOverlay","getElementById","canvasOverlayCtx","getContext","offsetWidth","height","offsetHeight","img","Image","onload","drawImage","setTimeout","_this","dataUri","_this$state","takePhotoBtn","takePhoto","click","setState","concat","ts","Date","now","openInNewTab","window","open","write","_this$state2","this","style","backgroundColor","src_AppCamera","marginRight","src_AppImage","src_AppButton","Component","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.f528250b.chunk.js","sourcesContent":["import React from \"react\";\nimport Camera from \"react-html5-camera-photo\";\nimport \"react-html5-camera-photo/build/css/index.css\";\n\nconst AppCamera = ({ onTakePhoto, onCameraStart }) => (\n  <div>\n    <canvas className=\"canvas-overlay\" id=\"canvas-overlay\" />\n    <Camera onTakePhoto={onTakePhoto} onCameraStart={onCameraStart} />\n  </div>\n);\n\nexport default AppCamera;\n","import React from \"react\";\n\nconst AppButton = ({ title, onClick }) => (\n  <button onClick={onClick}>{title}</button>\n);\n\nexport default AppButton;\n","import React from \"react\";\n\nconst AppImage = ({ src }) => <img src={src} width=\"250px\" alt=\"\" />;\n\nexport default AppImage;\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nimport AppCamera from \"./AppCamera\";\nimport AppButton from \"./AppButton\";\nimport AppImage from \"./AppImage\";\n\nclass App extends Component {\n  state = {\n    firstPhoto: \"\",\n    secondPhoto: \"\",\n    thirdPhoto: \"\",\n    timestamp: \"\"\n  };\n\n  sendToS3 = (data, name) => {\n    axios\n      .post(process.env.REACT_APP_BE_PATH_TO_UPLOAD, {\n        photo: data,\n        name\n      })\n      .then(r => r)\n      .catch(e => console.error(\"UPLOAD ERROR => \", e));\n  };\n\n  initCamera = () => {\n    const video = document.querySelector(\"video\");\n\n    const canvasOverlay = document.getElementById(\"canvas-overlay\");\n    const canvasOverlayCtx = canvasOverlay.getContext(\"2d\");\n    canvasOverlay.width = video.offsetWidth;\n    canvasOverlay.height = video.offsetHeight;\n\n    const img = new Image();\n    img.src = \"face_overlay.png\";\n    img.width = video.offsetWidth;\n    img.height = video.offsetHeight;\n\n    img.onload = () => {\n      canvasOverlayCtx.drawImage(img, 0, 0, img.width, img.height);\n    };\n  };\n\n  onCameraStart = setTimeout(this.initCamera, 3000);\n\n  onTakePhoto = dataUri => {\n    const { firstPhoto, secondPhoto, timestamp } = this.state;\n    const takePhotoBtn = document.getElementById(\"outer-circle\");\n\n    const takePhoto = () =>\n      setTimeout(() => takePhotoBtn && takePhotoBtn.click(), 300);\n\n    if (!firstPhoto) {\n      const ts = Date.now();\n      this.setState({ firstPhoto: dataUri, timestamp: ts });\n      this.sendToS3(dataUri, `normal_${ts}`);\n      takePhoto();\n    } else if (!secondPhoto) {\n      this.setState({ secondPhoto: dataUri });\n      this.sendToS3(dataUri, `white_${timestamp}`);\n      takePhoto();\n    } else {\n      this.setState({ thirdPhoto: dataUri });\n      this.sendToS3(dataUri, `black_${timestamp}`);\n    }\n  };\n\n  openInNewTab = data => () => {\n    const newWindow = window.open();\n    newWindow.document.write(`<img src=\"${data}\" width=\"100%\">`);\n  };\n\n  render() {\n    const { firstPhoto, secondPhoto, thirdPhoto, timestamp } = this.state;\n\n    return (\n      <div\n        className=\"app\"\n        style={{ backgroundColor: secondPhoto ? \"#000\" : \"#fff\" }}\n      >\n        {firstPhoto && !thirdPhoto && (\n          <div\n            className=\"overlay\"\n            style={{ backgroundColor: secondPhoto ? \"#000\" : \"#fff\" }}\n          />\n        )}\n        <h1 className=\"app-title\">Next Photo</h1>\n        {!thirdPhoto && (\n          <AppCamera\n            onTakePhoto={this.onTakePhoto}\n            onCameraStart={this.onCameraStart}\n          />\n        )}\n        {firstPhoto && !thirdPhoto && (\n          <p className=\"announcement\">Taking photo...</p>\n        )}\n        {thirdPhoto && (\n          <div className=\"images-wrapper\">\n            <div\n              className=\"images-wrapper__item\"\n              style={{ marginRight: \"15px\" }}\n            >\n              <AppImage src={firstPhoto} />\n              <AppButton\n                title={`normal_${timestamp}`}\n                onClick={this.openInNewTab(firstPhoto)}\n              />\n            </div>\n            <div\n              className=\"images-wrapper__item\"\n              style={{ marginRight: \"15px\" }}\n            >\n              <AppImage src={secondPhoto} />\n              <AppButton\n                title={`white_${timestamp}`}\n                onClick={this.openInNewTab(secondPhoto)}\n              />\n            </div>\n            <div className=\"images-wrapper__item\">\n              <AppImage src={thirdPhoto} />\n              <AppButton\n                title={`black_${timestamp}`}\n                onClick={this.openInNewTab(thirdPhoto)}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}