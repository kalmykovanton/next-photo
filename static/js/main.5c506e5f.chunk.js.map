{"version":3,"sources":["AppCamera.js","AppButton.js","AppImage.js","App.js","index.js"],"names":["AppCamera","_ref","onTakePhoto","onCameraStart","react_default","a","createElement","className","id","build_default","AppButton","title","onClick","AppImage","src","width","alt","App","state","firstPhoto","secondPhoto","thirdPhoto","croppedPhoto","timestamp","videoRef","takePhotoBtnRef","rectWidth","rectHeight","rectX","rectY","setTimeout","takePhotoBtn","document","getElementById","video","querySelector","videoOffsetWidth","offsetWidth","videoOffsetHeight","offsetHeight","Math","round","canvasOverlay","height","ctx","getContext","lineWidth","strokeStyle","strokeRect","_this","setState","cropImage","img","newWidth","newHeight","startX","startY","tnCanvas","tnCanvasContext","bufferCanvas","bufferContext","drawImage","toDataURL","dataUri","_this$state","takePhoto","click","Image","onload","Date","now","openInNewTab","data","window","open","write","concat","_this$state2","this","style","backgroundColor","src_AppCamera","marginRight","src_AppImage","src_AppButton","Component","ReactDOM","render","src_App"],"mappings":"oNAWeA,SAPG,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,YAAaC,EAAhBF,EAAgBE,cAAhB,OAChBC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQC,UAAU,iBAAiBC,GAAG,mBACtCJ,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CAAQH,YAAaA,EAAaC,cAAeA,OCDtCO,EAJG,SAAAT,GAAA,IAAGU,EAAHV,EAAGU,MAAOC,EAAVX,EAAUW,QAAV,OAChBR,EAAAC,EAAAC,cAAA,UAAQM,QAASA,GAAUD,ICCdE,EAFE,SAAAZ,GAAA,IAAGa,EAAHb,EAAGa,IAAH,OAAaV,EAAAC,EAAAC,cAAA,OAAKQ,IAAKA,EAAKC,MAAM,QAAQC,IAAI,MCoMhDC,6MA/LbC,MAAQ,CACNC,WAAY,GACZC,YAAa,GACbC,WAAY,GACZC,aAAc,GACdC,UAAW,GACXC,SAAU,KACVC,gBAAiB,KACjBC,UAAW,EACXC,WAAY,EACZC,MAAO,EACPC,MAAO,KAGT1B,cAAgB2B,WAAW,WACzB,IAAMC,EAAeC,SAASC,eAAe,gBACvCC,EAAQF,SAASG,cAAc,SAC/BC,EAAmBF,EAAMG,YACzBC,EAAoBJ,EAAMK,aAE1Bb,EAAYc,KAAKC,MAAML,EAAmB,GAC1CT,EAAaa,KAAKC,MAAOH,EAAoB,EAAK,GAClDV,GAASQ,EAAmBV,GAAa,EACzCG,GAASS,EAAoBX,GAAc,EAE3Ce,EAAgBV,SAASC,eAAe,kBAC9CS,EAAc3B,MAAQqB,EACtBM,EAAcC,OAASL,EACvB,IAAMM,EAAMF,EAAcG,WAAW,MACrCD,EAAIE,UAAY,EAChBF,EAAIG,YAAc,OAClBH,EAAII,WAAWpB,EAAOC,EAAOH,EAAWC,GAExCsB,EAAKC,SAAS,CACZ1B,SAAUU,EACVT,gBAAiBM,EACjBL,YACAC,aACAC,QACAC,WAED,QAEHsB,UAAY,SAACC,EAAKC,EAAUC,EAAWC,EAAQC,GAC7C,IAAIC,EAAWzB,SAAS1B,cAAc,UAClCoD,EAAkBD,EAASZ,WAAW,MAC1CY,EAAS1C,MAAQsC,EACjBI,EAASd,OAASW,EAElB,IAAIK,EAAe3B,SAAS1B,cAAc,UACtCsD,EAAgBD,EAAad,WAAW,MAiB5C,OAhBAc,EAAa5C,MAAQqC,EAAIrC,MACzB4C,EAAahB,OAASS,EAAIT,OAC1BiB,EAAcC,UAAUT,EAAK,EAAG,EAAGA,EAAIrC,MAAOqC,EAAIT,QAElDe,EAAgBG,UACdF,EACAJ,EACAC,EACAH,EACAC,EACA,EACA,EACAD,EACAC,GAGKG,EAASK,eAGlB5D,YAAc,SAAA6D,GAAW,IAAAC,EAUnBf,EAAK/B,MARPC,EAFqB6C,EAErB7C,WACAC,EAHqB4C,EAGrB5C,YACAI,EAJqBwC,EAIrBxC,SACAC,EALqBuC,EAKrBvC,gBACAC,EANqBsC,EAMrBtC,UACAC,EAPqBqC,EAOrBrC,WACAC,EARqBoC,EAQrBpC,MACAC,EATqBmC,EASrBnC,MAGIoC,EAAY,kBAChBnC,WAAW,kBAAML,GAAmBA,EAAgByC,SAAS,MAE/D,GAAK/C,EAiBOC,EAIV6B,EAAKC,SAAS,CAAE7B,WAAY0C,KAH5Bd,EAAKC,SAAS,CAAE9B,YAAa2C,IAC7BE,SAnBe,CACf,IAAMb,EAAM,IAAIe,MAChBf,EAAItC,IAAMiD,EACVX,EAAIrC,MAAQS,EAASa,YACrBe,EAAIT,OAASnB,EAASe,aACtBa,EAAIgB,OAAS,WACX,IAAM9C,EAAe2B,EAAKE,UACxBC,EACA1B,EACAC,EACAC,EACAC,GAEFoB,EAAKC,SAAS,CAAE5B,kBAElB2B,EAAKC,SAAS,CAAE/B,WAAY4C,EAASxC,UAAW8C,KAAKC,QACrDL,QASJM,aAAe,SAAAC,GAAI,OAAI,WACHC,OAAOC,OACf1C,SAAS2C,MAAnB,aAAAC,OAAsCJ,EAAtC,8FAGO,IAAAK,EAOHC,KAAK5D,MALPC,EAFK0D,EAEL1D,WACAC,EAHKyD,EAGLzD,YACAC,EAJKwD,EAILxD,WACAC,EALKuD,EAKLvD,aACAC,EANKsD,EAMLtD,UAGF,OACEnB,EAAAC,EAAAC,cAAA,OACEC,UAAU,MACVwE,MAAO,CAAEC,gBAAiB5D,EAAc,OAAS,SAEhDD,IAAeE,GACdjB,EAAAC,EAAAC,cAAA,OACEC,UAAU,UACVwE,MAAO,CAAEC,gBAAiB5D,EAAc,OAAS,UAGrDhB,EAAAC,EAAAC,cAAA,MAAIC,UAAU,aAAd,eACEc,GACAjB,EAAAC,EAAAC,cAAC2E,EAAD,CACE/E,YAAa4E,KAAK5E,YAClBC,cAAe2E,KAAK3E,gBAGvBgB,IAAeE,GACdjB,EAAAC,EAAAC,cAAA,KAAGC,UAAU,gBAAb,mBAEDc,GACCjB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAA,OACEC,UAAU,uBACVwE,MAAO,CAAEG,YAAa,SAEtB9E,EAAAC,EAAAC,cAAC6E,EAAD,CAAUrE,IAAKQ,IACflB,EAAAC,EAAAC,cAAC8E,EAAD,CACEzE,MAAK,WAAAiE,OAAarD,GAClBX,QAASkE,KAAKP,aAAajD,MAG/BlB,EAAAC,EAAAC,cAAA,OACEC,UAAU,uBACVwE,MAAO,CAAEG,YAAa,SAEtB9E,EAAAC,EAAAC,cAAC6E,EAAD,CAAUrE,IAAKK,IACff,EAAAC,EAAAC,cAAC8E,EAAD,CACEzE,MAAK,UAAAiE,OAAYrD,GACjBX,QAASkE,KAAKP,aAAapD,MAG/Bf,EAAAC,EAAAC,cAAA,OACEC,UAAU,uBACVwE,MAAO,CAAEG,YAAa,SAEtB9E,EAAAC,EAAAC,cAAC6E,EAAD,CAAUrE,IAAKM,IACfhB,EAAAC,EAAAC,cAAC8E,EAAD,CACEzE,MAAK,SAAAiE,OAAWrD,GAChBX,QAASkE,KAAKP,aAAanD,MAG/BhB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,wBACbH,EAAAC,EAAAC,cAAC6E,EAAD,CAAUrE,IAAKO,IACfjB,EAAAC,EAAAC,cAAC8E,EAAD,CACEzE,MAAK,SAAAiE,OAAWrD,GAChBX,QAASkE,KAAKP,aAAalD,eAtLzBgE,aCAlBC,IAASC,OAAOnF,EAAAC,EAAAC,cAACkF,EAAD,MAASxD,SAASC,eAAe","file":"static/js/main.5c506e5f.chunk.js","sourcesContent":["import React from \"react\";\nimport Camera from \"react-html5-camera-photo\";\nimport \"react-html5-camera-photo/build/css/index.css\";\n\nconst AppCamera = ({ onTakePhoto, onCameraStart }) => (\n  <div>\n    <canvas className=\"canvas-overlay\" id=\"canvas-overlay\" />\n    <Camera onTakePhoto={onTakePhoto} onCameraStart={onCameraStart} />\n  </div>\n);\n\nexport default AppCamera;\n","import React from \"react\";\n\nconst AppButton = ({ title, onClick }) => (\n  <button onClick={onClick}>{title}</button>\n);\n\nexport default AppButton;\n","import React from \"react\";\n\nconst AppImage = ({ src }) => <img src={src} width=\"250px\" alt=\"\" />;\n\nexport default AppImage;\n","import React, { Component } from \"react\";\n\nimport AppCamera from \"./AppCamera\";\nimport AppButton from \"./AppButton\";\nimport AppImage from \"./AppImage\";\n\nclass App extends Component {\n  state = {\n    firstPhoto: \"\",\n    secondPhoto: \"\",\n    thirdPhoto: \"\",\n    croppedPhoto: \"\",\n    timestamp: \"\",\n    videoRef: null,\n    takePhotoBtnRef: null,\n    rectWidth: 0,\n    rectHeight: 0,\n    rectX: 0,\n    rectY: 0\n  };\n\n  onCameraStart = setTimeout(() => {\n    const takePhotoBtn = document.getElementById(\"outer-circle\");\n    const video = document.querySelector(\"video\");\n    const videoOffsetWidth = video.offsetWidth;\n    const videoOffsetHeight = video.offsetHeight;\n\n    const rectWidth = Math.round(videoOffsetWidth / 3);\n    const rectHeight = Math.round((videoOffsetHeight / 3) * 2);\n    const rectX = (videoOffsetWidth - rectWidth) / 2;\n    const rectY = (videoOffsetHeight - rectHeight) / 2;\n\n    const canvasOverlay = document.getElementById(\"canvas-overlay\");\n    canvasOverlay.width = videoOffsetWidth;\n    canvasOverlay.height = videoOffsetHeight;\n    const ctx = canvasOverlay.getContext(\"2d\");\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#fff\";\n    ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);\n\n    this.setState({\n      videoRef: video,\n      takePhotoBtnRef: takePhotoBtn,\n      rectWidth,\n      rectHeight,\n      rectX,\n      rectY\n    });\n  }, 1500);\n\n  cropImage = (img, newWidth, newHeight, startX, startY) => {\n    var tnCanvas = document.createElement(\"canvas\");\n    var tnCanvasContext = tnCanvas.getContext(\"2d\");\n    tnCanvas.width = newWidth;\n    tnCanvas.height = newHeight;\n\n    var bufferCanvas = document.createElement(\"canvas\");\n    var bufferContext = bufferCanvas.getContext(\"2d\");\n    bufferCanvas.width = img.width;\n    bufferCanvas.height = img.height;\n    bufferContext.drawImage(img, 0, 0, img.width, img.height);\n\n    tnCanvasContext.drawImage(\n      bufferCanvas,\n      startX,\n      startY,\n      newWidth,\n      newHeight,\n      0,\n      0,\n      newWidth,\n      newHeight\n    );\n\n    return tnCanvas.toDataURL();\n  };\n\n  onTakePhoto = dataUri => {\n    const {\n      firstPhoto,\n      secondPhoto,\n      videoRef,\n      takePhotoBtnRef,\n      rectWidth,\n      rectHeight,\n      rectX,\n      rectY\n    } = this.state;\n\n    const takePhoto = () =>\n      setTimeout(() => takePhotoBtnRef && takePhotoBtnRef.click(), 300);\n\n    if (!firstPhoto) {\n      const img = new Image();\n      img.src = dataUri;\n      img.width = videoRef.offsetWidth;\n      img.height = videoRef.offsetHeight;\n      img.onload = () => {\n        const croppedPhoto = this.cropImage(\n          img,\n          rectWidth,\n          rectHeight,\n          rectX,\n          rectY\n        );\n        this.setState({ croppedPhoto });\n      };\n      this.setState({ firstPhoto: dataUri, timestamp: Date.now() });\n      takePhoto();\n    } else if (!secondPhoto) {\n      this.setState({ secondPhoto: dataUri });\n      takePhoto();\n    } else {\n      this.setState({ thirdPhoto: dataUri });\n    }\n  };\n\n  openInNewTab = data => () => {\n    const newWindow = window.open();\n    newWindow.document.write(`<img src=\"${data}\" width=\"100%\">`);\n  };\n\n  render() {\n    const {\n      firstPhoto,\n      secondPhoto,\n      thirdPhoto,\n      croppedPhoto,\n      timestamp\n    } = this.state;\n\n    return (\n      <div\n        className=\"app\"\n        style={{ backgroundColor: secondPhoto ? \"#000\" : \"#fff\" }}\n      >\n        {firstPhoto && !thirdPhoto && (\n          <div\n            className=\"overlay\"\n            style={{ backgroundColor: secondPhoto ? \"#000\" : \"#fff\" }}\n          />\n        )}\n        <h1 className=\"app-title\">Next Photo</h1>\n        {!thirdPhoto && (\n          <AppCamera\n            onTakePhoto={this.onTakePhoto}\n            onCameraStart={this.onCameraStart}\n          />\n        )}\n        {firstPhoto && !thirdPhoto && (\n          <p className=\"announcement\">Taking photo...</p>\n        )}\n        {thirdPhoto && (\n          <div className=\"images-wrapper\">\n            <div\n              className=\"images-wrapper__item\"\n              style={{ marginRight: \"15px\" }}\n            >\n              <AppImage src={croppedPhoto} />\n              <AppButton\n                title={`cropped_${timestamp}`}\n                onClick={this.openInNewTab(croppedPhoto)}\n              />\n            </div>\n            <div\n              className=\"images-wrapper__item\"\n              style={{ marginRight: \"15px\" }}\n            >\n              <AppImage src={firstPhoto} />\n              <AppButton\n                title={`normal_${timestamp}`}\n                onClick={this.openInNewTab(firstPhoto)}\n              />\n            </div>\n            <div\n              className=\"images-wrapper__item\"\n              style={{ marginRight: \"15px\" }}\n            >\n              <AppImage src={secondPhoto} />\n              <AppButton\n                title={`white_${timestamp}`}\n                onClick={this.openInNewTab(secondPhoto)}\n              />\n            </div>\n            <div className=\"images-wrapper__item\">\n              <AppImage src={thirdPhoto} />\n              <AppButton\n                title={`black_${timestamp}`}\n                onClick={this.openInNewTab(thirdPhoto)}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}