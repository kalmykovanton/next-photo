{"version":3,"sources":["AppCamera.js","AppButton.js","AppImage.js","App.js","index.js"],"names":["AppCamera","_ref","onTakePhoto","onCameraStart","react_default","a","createElement","className","id","build_default","AppButton","title","onClick","AppImage","src","width","alt","App","state","firstPhoto","secondPhoto","thirdPhoto","firstCroppedPhoto","secondCroppedPhoto","thirdCroppedPhoto","timestamp","videoRef","takePhotoBtnRef","rectWidth","rectHeight","rectX","rectY","setTimeout","takePhotoBtn","document","getElementById","video","querySelector","videoOffsetWidth","offsetWidth","videoOffsetHeight","offsetHeight","canvasOverlay","height","ctx","getContext","lineWidth","strokeStyle","strokeRect","_this","setState","cropImage","img","newWidth","newHeight","startX","startY","tnCanvas","tnCanvasContext","bufferCanvas","bufferContext","drawImage","toDataURL","dataUri","_this$state","takePhoto","click","Image","onload","croppedPhoto","Date","now","openInNewTab","data","window","open","write","concat","_this$state2","this","style","backgroundColor","src_AppCamera","Fragment","marginRight","src_AppImage","src_AppButton","Component","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.ec799980.chunk.js","sourcesContent":["import React from \"react\";\nimport Camera from \"react-html5-camera-photo\";\nimport \"react-html5-camera-photo/build/css/index.css\";\n\nconst AppCamera = ({ onTakePhoto, onCameraStart }) => (\n  <div>\n    <canvas className=\"canvas-overlay\" id=\"canvas-overlay\" />\n    <Camera onTakePhoto={onTakePhoto} onCameraStart={onCameraStart} />\n  </div>\n);\n\nexport default AppCamera;\n","import React from \"react\";\n\nconst AppButton = ({ title, onClick }) => (\n  <button onClick={onClick}>{title}</button>\n);\n\nexport default AppButton;\n","import React from \"react\";\n\nconst AppImage = ({ src }) => <img src={src} width=\"250px\" alt=\"\" />;\n\nexport default AppImage;\n","import React, { Component } from \"react\";\n\nimport AppCamera from \"./AppCamera\";\nimport AppButton from \"./AppButton\";\nimport AppImage from \"./AppImage\";\n\nclass App extends Component {\n  state = {\n    firstPhoto: \"\",\n    secondPhoto: \"\",\n    thirdPhoto: \"\",\n    firstCroppedPhoto: \"\",\n    secondCroppedPhoto: \"\",\n    thirdCroppedPhoto: \"\",\n    timestamp: \"\",\n    videoRef: null,\n    takePhotoBtnRef: null,\n    rectWidth: 0,\n    rectHeight: 0,\n    rectX: 0,\n    rectY: 0\n  };\n\n  onCameraStart = setTimeout(() => {\n    const takePhotoBtn = document.getElementById(\"outer-circle\");\n    const video = document.querySelector(\"video\");\n    const videoOffsetWidth = video.offsetWidth;\n    const videoOffsetHeight = video.offsetHeight;\n\n    const rate = 2 / 3;\n    const rectHeight = videoOffsetHeight * rate;\n    const rectWidth = rectHeight * rate;\n    const rectX = (videoOffsetWidth - rectWidth) / 2;\n    const rectY = (videoOffsetHeight - rectHeight) / 2;\n\n    const canvasOverlay = document.getElementById(\"canvas-overlay\");\n    canvasOverlay.width = videoOffsetWidth;\n    canvasOverlay.height = videoOffsetHeight;\n    const ctx = canvasOverlay.getContext(\"2d\");\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#fff\";\n    ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);\n\n    this.setState({\n      videoRef: video,\n      takePhotoBtnRef: takePhotoBtn,\n      rectWidth,\n      rectHeight,\n      rectX,\n      rectY\n    });\n  }, 1500);\n\n  cropImage = (img, newWidth, newHeight, startX, startY) => {\n    var tnCanvas = document.createElement(\"canvas\");\n    var tnCanvasContext = tnCanvas.getContext(\"2d\");\n    tnCanvas.width = newWidth;\n    tnCanvas.height = newHeight;\n\n    var bufferCanvas = document.createElement(\"canvas\");\n    var bufferContext = bufferCanvas.getContext(\"2d\");\n    bufferCanvas.width = img.width;\n    bufferCanvas.height = img.height;\n    bufferContext.drawImage(img, 0, 0, img.width, img.height);\n\n    tnCanvasContext.drawImage(\n      bufferCanvas,\n      startX,\n      startY,\n      newWidth,\n      newHeight,\n      0,\n      0,\n      newWidth,\n      newHeight\n    );\n\n    return tnCanvas.toDataURL();\n  };\n\n  onTakePhoto = dataUri => {\n    const {\n      firstPhoto,\n      secondPhoto,\n      videoRef,\n      takePhotoBtnRef,\n      rectWidth,\n      rectHeight,\n      rectX,\n      rectY\n    } = this.state;\n\n    const takePhoto = () =>\n      setTimeout(() => takePhotoBtnRef && takePhotoBtnRef.click(), 300);\n\n    const img = new Image();\n    img.src = dataUri;\n    img.width = videoRef.offsetWidth;\n    img.height = videoRef.offsetHeight;\n\n    if (!firstPhoto) {\n      img.onload = () => {\n        const croppedPhoto = this.cropImage(\n          img,\n          rectWidth,\n          rectHeight,\n          rectX,\n          rectY\n        );\n        this.setState({ firstCroppedPhoto: croppedPhoto });\n      };\n      this.setState({ firstPhoto: dataUri, timestamp: Date.now() });\n      takePhoto();\n    } else if (!secondPhoto) {\n      img.onload = () => {\n        const croppedPhoto = this.cropImage(\n          img,\n          rectWidth,\n          rectHeight,\n          rectX,\n          rectY\n        );\n        this.setState({ secondCroppedPhoto: croppedPhoto });\n      };\n      this.setState({ secondPhoto: dataUri });\n      takePhoto();\n    } else {\n      img.onload = () => {\n        const croppedPhoto = this.cropImage(\n          img,\n          rectWidth,\n          rectHeight,\n          rectX,\n          rectY\n        );\n        this.setState({ thirdCroppedPhoto: croppedPhoto });\n      };\n      this.setState({ thirdPhoto: dataUri });\n    }\n  };\n\n  openInNewTab = data => () => {\n    const newWindow = window.open();\n    newWindow.document.write(`<img src=\"${data}\" width=\"100%\">`);\n  };\n\n  render() {\n    const {\n      firstPhoto,\n      secondPhoto,\n      thirdPhoto,\n      firstCroppedPhoto,\n      secondCroppedPhoto,\n      thirdCroppedPhoto,\n      timestamp\n    } = this.state;\n\n    return (\n      <div\n        className=\"app\"\n        style={{ backgroundColor: secondPhoto ? \"#000\" : \"#fff\" }}\n      >\n        {firstPhoto && !thirdPhoto && (\n          <div\n            className=\"overlay\"\n            style={{ backgroundColor: secondPhoto ? \"#000\" : \"#fff\" }}\n          />\n        )}\n        <h1 className=\"app-title\">Next Photo</h1>\n        {!thirdPhoto && (\n          <AppCamera\n            onTakePhoto={this.onTakePhoto}\n            onCameraStart={this.onCameraStart}\n          />\n        )}\n        {firstPhoto && !thirdPhoto && (\n          <p className=\"announcement\">Taking photo...</p>\n        )}\n        {thirdPhoto && (\n          <React.Fragment>\n            <div className=\"images-wrapper\">\n              <div\n                className=\"images-wrapper__item\"\n                style={{ marginRight: \"15px\" }}\n              >\n                <AppImage src={firstCroppedPhoto} />\n                <AppButton\n                  title={`normal_cropped_${timestamp}`}\n                  onClick={this.openInNewTab(firstCroppedPhoto)}\n                />\n              </div>\n              <div\n                className=\"images-wrapper__item\"\n                style={{ marginRight: \"15px\" }}\n              >\n                <AppImage src={secondCroppedPhoto} />\n                <AppButton\n                  title={`white_cropped_${timestamp}`}\n                  onClick={this.openInNewTab(secondCroppedPhoto)}\n                />\n              </div>\n              <div className=\"images-wrapper__item\">\n                <AppImage src={thirdCroppedPhoto} />\n                <AppButton\n                  title={`black_cropped_${timestamp}`}\n                  onClick={this.openInNewTab(thirdCroppedPhoto)}\n                />\n              </div>\n            </div>\n            <div className=\"images-wrapper images-wrapper--bottom-margin\">\n              <div\n                className=\"images-wrapper__item\"\n                style={{ marginRight: \"15px\" }}\n              >\n                <AppImage src={firstPhoto} />\n                <AppButton\n                  title={`normal_${timestamp}`}\n                  onClick={this.openInNewTab(firstPhoto)}\n                />\n              </div>\n              <div\n                className=\"images-wrapper__item\"\n                style={{ marginRight: \"15px\" }}\n              >\n                <AppImage src={secondPhoto} />\n                <AppButton\n                  title={`white_${timestamp}`}\n                  onClick={this.openInNewTab(secondPhoto)}\n                />\n              </div>\n              <div className=\"images-wrapper__item\">\n                <AppImage src={thirdPhoto} />\n                <AppButton\n                  title={`black_${timestamp}`}\n                  onClick={this.openInNewTab(thirdPhoto)}\n                />\n              </div>\n            </div>\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}